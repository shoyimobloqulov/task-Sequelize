<!DOCTYPE html>
<html>
<head>
  <link href="/css/output.css" rel="stylesheet">
</head>
<body class="bg-gray-900 flex items-center justify-center h-screen">

  <form id="loginForm" class="bg-gray-800 p-8 rounded-xl w-96">
    <h2 class="text-2xl font-bold text-center text-green-400 mb-6">Kirish</h2>

    <input type="email" placeholder="Email"
      class="w-full p-3 mb-4 rounded bg-gray-700 text-white">

    <input type="password" placeholder="Parol"
      class="w-full p-3 mb-4 rounded bg-gray-700 text-white">

    <button class="w-full bg-green-500 hover:bg-green-600 p-3 rounded font-bold">
      Kirish
    </button>

    <p class="text-center text-gray-400 mt-4">
      Akkauntingiz yo‘qmi?
      <a href="/register" class="text-green-400">Ro‘yxatdan o‘tish</a>
    </p>
  </form>
<script>
  const form = document.getElementById('loginForm');
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const email = form.querySelector('input[type="email"]').value;
    const password = form.querySelector('input[type="password"]').value;

    const res = await fetch('/api/login', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({ email, password })
    });

    const data = await res.json();
    if(data.token) window.location.href = '/dashboard';
    else alert(data.message);
  });
</script>
</body>
</html>
